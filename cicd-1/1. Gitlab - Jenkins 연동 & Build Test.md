# 1. Gitlab - Jenkins 연동 & Build Test

- 본 문서는 Gitlab과 Jenkins를 연동하여 Source Code를 가져와 Maven Build 하는 과정을 설명 합니다.

-   실행 환경
    - AWS EKS 구성
    - Nginx Ingress 구성
    - Gitlab v14.4.1 (Helm)
    - Jenkins v2.303.2 (Helm)

## 1. Jenkins 설정 관리

### 1.1. Jenkins UI에서 아래 Plugin을 다운로드
- Dashboard에서 [Jenkins 관리] -> [Plugin 관리] 버튼을 클릭하여 GitLab Plugin, Maven Install 후 재 실행

![jenkins-ci-1][jenkins-ci-1]

[jenkins-ci-1]:./images/jenkins-ci-1.PNG


![jenkins-ci-2][jenkins-ci-2]

[jenkins-ci-2]:./images/jenkins-ci-2.PNG


### 1.2. JDK, Maven CLI 설정
- Dashboard에서 [Global Tool Configuration]으로 이동하여 JDK, Maven CLI를 설정
- 본 문서는 JDK는 원격지에서 tar.gz 파일을 다운로드 설정, Maven은 외부 망을 통해 설정하도록 Config를 구성

![jenkins-ci-3][jenkins-ci-3]

[jenkins-ci-3]:./images/jenkins-ci-3.PNG

![jenkins-ci-4][jenkins-ci-4]

[jenkins-ci-4]:./images/jenkins-ci-4.PNG

### 1.3.  Jenkins  Gitlab 연동 설정
- Gitlab UI의 아래 화면을 통하여 Jenkin 연동 용 Access Token를 신규 발급

![jenkins-ci-5][jenkins-ci-5]

[jenkins-ci-5]:./images/jenkins-ci-5.PNG

![jenkins-ci-6][jenkins-ci-6]

[jenkins-ci-6]:./images/jenkins-ci-6.PNG

- Jenkins UI에서 [Credentials] 화면에 접속하여 Gitlab에서 생성한 Access Token에 대한 인증 정보를 생성

![jenkins-ci-7][jenkins-ci-7]

[jenkins-ci-7]:./images/jenkins-ci-7.PNG

![jenkins-ci-8][jenkins-ci-8]

[jenkins-ci-8]:./images/jenkins-ci-8.PNG

![jenkins-ci-9][jenkins-ci-9]

[jenkins-ci-9]:./images/jenkins-ci-9.PNG

- Jenkins UI에서 [환경 설정]에 이동하여 Gitlab 주소 정보 설정

![jenkins-ci-10][jenkins-ci-10]

[jenkins-ci-10]:./images/jenkins-ci-10.PNG

## 2. Jenkins 프로젝트 구성

### 2.1. Jenkins Dashboard에서 [새로운 Items] 버튼을 클릭 [Freestyle Project] 버튼 클릭하여 Project 생성

- Project에서 Gitlab Repositroy 정보와 Maven 정보 입력

![jenkins-ci-11][jenkins-ci-11]

[jenkins-ci-11]:./images/jenkins-ci-11.PNG


![jenkins-ci-12][jenkins-ci-12]

[jenkins-ci-12]:./images/jenkins-ci-12.PNG

- GIt Reposistory 등록 시 인증서 에러 발생 시 Jenkins Install 가이드 Issue 목록을 활용하여 체크


### 2.2. Project Build 실행 확인

- 정상 Maven Build가 동작 됨을 확인

![jenkins-ci-13][jenkins-ci-13]

[jenkins-ci-13]:./images/jenkins-ci-13.PNG
